<% pre_like = post.likes.find { |like| like.user_id == current_user.id} %>
<% if pre_like %>
  <%= form_for(pre_like, url: like_path(pre_like.id), method: :delete) do |f| %>
    <%= hidden_field_tag :likeable_id, post.id %>
    <%= hidden_field_tag :like_type, "Post" %>
    <%= f.submit "Unlike" %>
  <% end %>
<% else %>
  <%= form_for(post.likes.build, url: likes_path) do |f| %>
    <%= hidden_field_tag :likeable_id, post.id %>
    <%= hidden_field_tag :like_type, "Post" %>
    <%= f.submit "Like" %>
  <% end %>
<% end %>